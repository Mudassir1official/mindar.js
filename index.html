<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MindAR.js demo</title>
    <style>
      html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; }
      .loading { position: fixed; inset: 0; display: grid; place-items: center; color: #fff; font: 16px/1.4 system-ui, sans-serif; }
      .loading[hidden] { display: none; }
    </style>
    <!-- A-Frame core -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <!-- MindAR for A-Frame -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.4/dist/mindar-image-aframe.prod.js"></script>
  </head>
  <body>
    <div id="loading" class="loading">Loading ARâ€¦ If camera access is blocked, use HTTPS or localhost.</div>

    <a-scene
      mindar-image="imageTargetSrc: ./targets.mind; autoStart: true; uiLoading: no; uiScanning: yes; uiError: yes;"
      renderer="alpha: true; antialias: true; precision: mediump"
      color-space="sRGB"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: true"
      embedded
    >
      <a-assets timeout="15000">
        <a-asset-item id="model" src="./base.glb"></a-asset-item>
      </a-assets>

      <!-- Lights for the GLB model -->
      <a-entity light="type: ambient; intensity: 0.7"></a-entity>
      <a-entity light="type: directional; intensity: 0.9" position="0 1 1"></a-entity>

      <!-- Target index 0 from targets.mind -->
      <a-entity mindar-image-target="targetIndex: 0">
        <a-gltf-model src="#model" position="0 0 0" rotation="0 0 0" scale="0.1 0.1 0.1"></a-gltf-model>
      </a-entity>

      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
    </a-scene>

    <script>
      // Hide custom loader when A-Frame finishes
      const loading = document.getElementById('loading');
      window.addEventListener('load', () => {
        const scene = document.querySelector('a-scene');
        if (scene?.hasLoaded) loading.hidden = true; else scene?.addEventListener('loaded', () => loading.hidden = true);
      });
    </script>
  </body>
</html>
